{% extends 'base.html' %}

{% block title %}AI Insights - {{ destination.name }} - Travel Planner{% endblock %}

{% block content %}
<div class="container my-5">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
            <li class="breadcrumb-item"><a href="{% url 'destinations:list' %}">Destinations</a></li>
            <li class="breadcrumb-item"><a href="{% url 'destinations:detail' destination.pk %}">{{ destination.name }}</a></li>
            <li class="breadcrumb-item active">AI Insights</li>
        </ol>
    </nav>

    <!-- Header -->
    <div class="text-center mb-5">
        <h1 class="display-5 fw-bold" style="color: var(--primary-black);">
            <i class="bi bi-lightbulb-fill"></i> AI Travel Insights
        </h1>
        <h3 style="color: var(--medium-gray); font-weight: 600;">{{ destination.name }}, {{ destination.country }}</h3>
    </div>

    <div class="row">
        <!-- Destination Quick Info -->
        <div class="col-lg-4 mb-4">
            <div class="card" style="border: 2px solid var(--primary-black); border-radius: 12px; background: var(--pure-white);">
                <div class="card-header" style="background: var(--primary-black); color: var(--pure-white); border-bottom: 2px solid var(--primary-black); padding: 1.5rem; border-radius: 10px 10px 0 0;">
                    <h5 class="mb-0" style="font-weight: 700;"><i class="bi bi-info-circle"></i> Destination Info</h5>
                </div>
                <div class="card-body p-4">
                    <h5 class="mb-3" style="color: var(--text-color); font-weight: 700;">{{ destination.name }}</h5>
                    <p style="color: var(--medium-gray);">{{ destination.description|truncatewords:30 }}</p>
                    
                    <div class="mb-3">
                        <span class="badge" style="background: var(--primary-black); color: var(--pure-white); padding: 0.5rem 1rem; border-radius: 6px; margin-right: 0.5rem;">
                            <i class="bi bi-cash-coin"></i> â‚¹{{ destination.avg_budget|floatformat:0 }}
                        </span>
                        <span class="badge" style="background: var(--primary-black); color: var(--pure-white); padding: 0.5rem 1rem; border-radius: 6px;">
                            <i class="bi bi-sun"></i> {{ destination.best_season }}
                        </span>
                    </div>
                    
                    <div class="d-grid gap-2">
                        <a href="{% url 'destinations:detail' destination.pk %}" class="btn" style="background: var(--primary-black); color: var(--pure-white); padding: 0.75rem; border-radius: 8px; text-decoration: none;">
                            <i class="bi bi-eye"></i> Full Details
                        </a>
                        <a href="{% url 'itineraries:create' %}" class="btn" style="border: 2px solid var(--primary-black); color: var(--primary-black); background: var(--pure-white); padding: 0.75rem; border-radius: 8px; text-decoration: none;">
                            <i class="bi bi-plus-circle"></i> Create Itinerary
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Generated Tips -->
        <div class="col-lg-8">
            {% if ai_tips.success %}
                <div class="card" style="border: 2px solid var(--primary-black); border-radius: 12px; background: var(--pure-white);">
                    <div class="card-header" style="background: var(--primary-black); color: var(--pure-white); border-bottom: 2px solid var(--primary-black); padding: 1.5rem; border-radius: 10px 10px 0 0;">
                        <h5 class="mb-0" style="font-weight: 700;">
                            <i class="bi bi-stars"></i> AI-Powered Travel Tips for {{ destination.best_season }}
                        </h5>
                    </div>
                    <div class="card-body p-4">
                        <div class="alert" style="border: 1px solid var(--primary-black); background: #f8f9fa; border-radius: 8px; color: var(--text-color);">
                            <i class="bi bi-robot"></i> Generated by AI based on destination and season
                        </div>
                        
                        <div class="tips-content p-4" style="background: #f8f9fa; border: 1px solid var(--light-gray); border-radius: 8px; white-space: pre-wrap; line-height: 1.8; color: var(--text-color);">{{ ai_tips.tips }}</div>
                        
                        <hr class="my-4" style="border-color: var(--light-gray);">
                        
                        <div class="row g-3">
                            <div class="col-md-6">
                                <a href="{% url 'ai-planner' %}" class="btn w-100" style="background: var(--primary-black); color: var(--pure-white); padding: 0.75rem; border-radius: 8px; text-decoration: none;">
                                    <i class="bi bi-calendar-week"></i> Get AI Itinerary
                                </a>
                            </div>
                            <div class="col-md-6">
                                <a href="{% url 'ai-assistant' %}" class="btn w-100" style="border: 2px solid var(--primary-black); color: var(--primary-black); background: var(--pure-white); padding: 0.75rem; border-radius: 8px; text-decoration: none;">
                                    <i class="bi bi-chat-dots"></i> Ask AI More
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="card" style="border: 2px solid var(--primary-black); border-radius: 12px; background: var(--pure-white);">
                    <div class="card-body p-5 text-center">
                        <i class="bi bi-exclamation-triangle" style="font-size: 4rem; color: var(--primary-black); opacity: 0.5;"></i>
                        <h4 class="mt-3" style="color: var(--text-color); font-weight: 700;">AI Service Unavailable</h4>
                        <p style="color: var(--medium-gray);">{{ ai_tips.error }}</p>
                        <a href="{% url 'destinations:detail' destination.pk %}" class="btn mt-3" style="background: var(--primary-black); color: var(--pure-white); padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none;">
                            Back to Destination
                        </a>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- More AI Features -->
    <div class="row mt-5 g-4">
        <div class="col-md-4">
            <div class="card h-100" style="border: 2px solid var(--primary-black); border-radius: 8px; background: var(--pure-white);">
                <div class="card-body text-center p-4">
                    <i class="bi bi-robot" style="font-size: 3rem; color: var(--primary-black);"></i>
                    <h5 class="mt-3" style="color: var(--text-color); font-weight: 700;">Ask AI Anything</h5>
                    <p class="small" style="color: var(--medium-gray);">Get instant answers to your travel questions</p>
                    <a href="{% url 'ai-assistant' %}" class="btn btn-sm" style="background: var(--primary-black); color: var(--pure-white); padding: 0.5rem 1.5rem; border-radius: 6px; text-decoration: none;">Try Now</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100" style="border: 2px solid var(--primary-black); border-radius: 8px; background: var(--pure-white);">
                <div class="card-body text-center p-4">
                    <i class="bi bi-calendar-event" style="font-size: 3rem; color: var(--primary-black);"></i>
                    <h5 class="mt-3" style="color: var(--text-color); font-weight: 700;">AI Itinerary Planner</h5>
                    <p class="small" style="color: var(--medium-gray);">Generate detailed day-by-day plans</p>
                    <a href="{% url 'ai-planner' %}" class="btn btn-sm" style="background: var(--primary-black); color: var(--pure-white); padding: 0.5rem 1.5rem; border-radius: 6px; text-decoration: none;">Plan Trip</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100" style="border: 2px solid var(--primary-black); border-radius: 8px; background: var(--pure-white);">
                <div class="card-body text-center p-4">
                    <i class="bi bi-compass" style="font-size: 3rem; color: var(--primary-black);"></i>
                    <h5 class="mt-3" style="color: var(--text-color); font-weight: 700;">More Destinations</h5>
                    <p class="small" style="color: var(--medium-gray);">Explore other amazing places</p>
                    <a href="{% url 'destinations:list' %}" class="btn btn-sm" style="border: 2px solid var(--primary-black); color: var(--primary-black); background: var(--pure-white); padding: 0.5rem 1.5rem; border-radius: 6px; text-decoration: none;">Explore</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
